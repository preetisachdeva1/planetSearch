function appController($location){localStorage.getItem("loggedInUser")?$location.path("/planet"):$location.path("/")}function config($routeProvider,$locationProvider){$routeProvider.when("/",{templateUrl:"app/components/home/homeView.html",controller:"homeController",controllerAs:"login"}).when("/planet",{templateUrl:"app/components/planetdetail/planetView.html",controller:"planetDetailController",controllerAs:"planetdetail"}).otherwise({redirectTo:"/"}),$locationProvider.html5Mode(!1)}function homeController(getUserService,$timeout,$location){function loginSubmitForm(){if(login.loginFormSubmitted=!0,login.loginStart=!1,void 0===login.user.uname||""===login.user.uname)return focus("uname"),!1;if(void 0===login.user.password||""===login.user.password)return focus("password"),!1;var opts1={};login.loginStart=!0,opts1.uname=login.user.uname,opts1.password=login.user.password,getUserService.get({name:opts1.uname},function(data){1==data.count?data.results[0].birth_year==login.user.password?(login.loginStart=!1,localStorage.setItem("loggedInUser",JSON.stringify(data.results)),$location.path("/planet")):data.results[0].birth_year!=login.user.password&&(login.loginStart=!1,login.userPassWrong=!0,login.msgShow="Password is wrong",$timeout(function(){login.msgShow=""},3e3)):0==data.count?(login.loginStart=!1,login.userPassWrong=!0,login.msgShow="User not found",$timeout(function(){login.msgShow=""},3e3)):login.loginStart=!0},function(error){console.log("there is error in api")})}var login=this;login.user={},login.loginFormSubmitted=!1,login.loginSubmit=loginSubmitForm,login.userPassWrong=!1,login.msgShow=""}function getUserService($resource){var factoryData=$resource(APP.endpoints.fetchUser,{},{query:{method:"GET",isArray:!1}});return factoryData}function planetDetailController($location){function logout(){localStorage.removeItem("loggedInUser"),$location.path("/")}var planetdetail=this;planetdetail.logout=logout}function searchController(getPlanetService){function searchPlanet(){var limit_start=search.listOfPlanet.length;search.planetNoFound=!1,1==search.checkInKeyword&&search.keywordChange!=search.keyword&&(console.log("okok"),search.page=1,search.totalSizeImg=0,search.allResImg=1,search.listOfPlanet=[]),""!==search.keyword&&void 0!=search.keyword&&(search.totalSizeImg>limit_start||0==search.totalSizeImg)&&1==search.allResImg&&(search.showLoader=!0,search.allResImg=0,getPlanetService.get({name:search.keyword,page:search.page},function(data){search.allResImg=1,search.checkInKeyword=1,search.totalSizeImg=data.count,search.showLoader=!1,search.keywordChange=search.keyword,data.results.forEach(function(entry){addStyle(entry)}),search.listOfPlanet=search.listOfPlanet.concat(data.results),search.page++,0==data.count&&(search.planetNoFound=!0)},function(error){search.listOfPlanet=[]}))}function addStyle(entry){entry.population<1e5||"unknown"==entry.population?entry.fontSize=0:entry.population<1e7?entry.fontSize=1:entry.population<1e9?entry.fontSize=2:entry.population<1e11?entry.fontSize=3:entry.population<1e13?entry.fontSize=4:entry.fontSize=5}function loadMore(){""!==search.keyword&&void 0!==search.keyword&&searchPlanet()}var search=this;search.listOfPlanet=[],search.searchPlanets=searchPlanet,search.showLoader=!1,search.planetNoFound=!1,search.page=1,search.totalSizeImg=0,search.allResImg=1,search.checkInKeyword=0,search.loadMore=loadMore,search.keywordChange,search.addStyle=addStyle}function searchPlanetModule(){var directive={templateUrl:"app/shared/search/searchView.html",restrict:"E",controller:searchController,controllerAs:"search"};return directive}function getPlanetService($resource){var factoryData=$resource(APP.endpoints.fetchPlanet,{},{query:{method:"GET",isArray:!1}});return factoryData}angular.module("app",["ngRoute","ngResource","infinite-scroll","ngMessages"]),angular.module("app").controller("appController",appController),angular.module("app").config(config),angular.module("app").controller("homeController",homeController),angular.module("app").factory("getUserService",getUserService),angular.module("app").controller("planetDetailController",planetDetailController),angular.module("app").controller("searchController",searchController),angular.module("app").directive("searchPlanet",searchPlanetModule),angular.module("app").factory("getPlanetService",getPlanetService);